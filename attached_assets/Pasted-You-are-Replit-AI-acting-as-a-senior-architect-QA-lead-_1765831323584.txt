You are Replit AI acting as a **senior architect & QA lead** for the CRStats (CR Status) project.

I want a **brutally honest, comprehensive audit** of the CURRENT state of the app ‚Äì NOT a new plan and NOT more code changes (for now). I need clarity before I start testing as a real user.

‚ö†Ô∏è Very important:
- DO NOT modify any code in this run.
- DO NOT create new files or migrations.
- Only READ the codebase and DESCRIBE what‚Äôs there.
- Be 100% honest, even if something is half-baked or messy.

---

## 1. High-level overview

First, give me a short high-level overview of the current product:

- What is implemented today as the **main experience** (Dashboard, Profile, Coach, Training, Decks, Billing, Community, etc.).
- What tech stack is actually in use (frontend pages/components, server routes, storage layer, OpenAI integration, Stripe, Clash API, etc.).

Then the important part:

> I want you to classify everything into 4 buckets:
> 1. ‚úÖ Fully implemented & production-ready
> 2. üü° Implemented but incomplete / fragile
> 3. üß© Mocked / placeholder / skeleton only
> 4. üî¥ Planned but NOT implemented

For the rest of the audit, always tag features with one of these 4 statuses.

---

## 2. Feature-by-feature status (very detailed)

Go through the project and for each **major area**, tell me:

- What exists (files, routes, components).
- How far it is (100% / partial / mock).
- What is missing for it to be ‚Äúproduction-ready‚Äù.

Cover at least the following areas:

1. **Authentication & Profile**
   - Login, logout, account settings, profile data (`profiles`).
   - Onboarding (tag entry, first-time flows).
   - Default player selection / favorite player logic.

2. **Dashboard (main overview)**
   - Current trophies, best season, win rate cards.
   - ‚ÄúLast battles‚Äù / ‚Äúrecent performance‚Äù.
   - Integration with `/api/player/sync` (does every card really use the synced data?).

3. **Player Profile page (`/me`)**
   - Header with tag, arena, clan, streaks, last played.
   - Arena progress bar to next arena/league.
   - Tabs: Overview / History / Decks & Meta / Progress (what is real, what is still mock?).
   - Whether everything here is fed by the new unified sync endpoint or there are leftovers calling older APIs.

4. **Pushes & Battle History**
   - Grouping battles into push sessions (30-minute rule, min 2 games).
   - ‚ÄúLast push‚Äù summary banner.
   - History page grouping pushes + battles (is this 100% working or any edge cases?).
   - Tilt detection: where it is computed, how, and how it is shown in the UI.

5. **AI Coach (ChatGPT)**
   - Backend:
     - Route(s) that call OpenAI (which file, which model, and how messages are built).
     - FREE vs PRO message limit logic (where count is stored, how the daily limit is enforced).
     - Detection of phrases like ‚Äúwhy did I lose my last game?‚Äù / ‚Äúanalise minha √∫ltima derrota‚Äù and how the **last battle context** is injected.
   - Frontend:
     - Page layout, initial system message.
     - Daily counter (5/5 remaining for FREE) and limit-reached banner.
     - Integration with the backend error codes (limit reached, etc.).
   - VERY IMPORTANT:
     - Does the coach REALLY receive:
       - last battle context (decks, result, trophies, mode, push info, tilt)?
       - player profile context (trophies, arena, streak, goals)?
     - Or is part of that still ‚Äúplanned but not implemented‚Äù?

6. **Push Analysis (session analysis)**
   - Where is the push analysis generated (route and OpenAI call).
   - What exactly is sent to the LLM (number of games, stats, etc.).
   - What the `PushAnalysisResult` structure looks like and where it is stored (if at all).
   - UI:
     - Where `PushAnalysisCard` is used (`/me` etc.).
     - When does it show up? Only for PRO? Behind a flag?
   - Status: is this fully wired end-to-end or are there gaps (e.g. sometimes there is no analysis, error handling missing, etc.)?

7. **Training Center**
   - Database / schema:
     - `training_plans`, `training_drills` (fields, relations).
   - Storage layer:
     - Methods for create/read/update/archive plans & drills.
   - Backend routes:
     - `GET /api/training/plans`
     - `POST /api/training/generate-from-last-push`
     - `PATCH /api/training/drills/:id`
     - How they actually work today (input, output, error handling).
   - Integration with push analysis:
     - Is the training plan truly generated from the latest push analysis?
     - Or is some of that logic still a TODO or mock?
   - Frontend (`/training` page):
     - What the FREE user sees (locked PRO banner).
     - What the PRO user would see (are those cards fully dynamic or mock placeholders?).
   - Status: is the full loop ‚Äúpush ‚Üí analysis ‚Üí training plan ‚Üí drills with progress‚Äù really working for PRO, or partially implemented?

8. **Decks & Meta**
   - ‚ÄúMy decks‚Äù and ‚ÄúMeta decks‚Äù:
     - Source of data (Clash API, cached meta, or mock).
     - Which parts are real vs placeholder.
   - Any AI integration here yet (e.g. deck suggestions) or just static?

9. **Billing & PRO Gating**
   - Stripe integration:
     - Which endpoints exist (checkout, webhook, customer portal).
     - Which ones are wired to TEST mode only.
   - Database:
     - `subscriptions` table (fields, status updates).
   - Gating:
     - Where in the frontend we check `isPro` (Coach, Training Center, PushAnalysis, Decks, etc.).
     - Any feature that should be PRO but is still ‚Äúopen‚Äù to FREE or vice-versa.
   - Known limitations (from your previous run you mentioned payment could not be fully tested).

10. **Goals, Favorites, Notifications, Settings**
    - Goals (metas) and favorite players:
      - Are they fully migrated to canonical tables and APIs?
      - Are they used in the current UI or still mostly backend/domain?
    - Notifications:
      - Current state (are in-app notifications actually used anywhere right now or mostly legacy?).
    - User settings:
      - Theme, language, default landing page, etc.: fully working?

11. **Community / Public Profiles**
    - `/community`, `/p/[tag]`, `/clan/[tag]`:
      - Are these pages present and fully functional in this current version?
      - Or are they still from an older version / not wired to the new sync/coach system?

12. **i18n / Multi-language**
    - Which pages/components fully use i18n (PT-BR / EN-US).
    - Where there are still hardcoded PT-BR strings.
    - Any missing keys (warnings in console).

13. **Technical risks / TODOs**
    - Any `TODO`, `FIXME`, `@ts-expect-error`, or commented-out sections that indicate unfinished work.
    - Any duplicated or dead code (old routes, old pages) that are no longer used by the current UX.
    - Any error handling gaps around:
      - OpenAI calls,
      - Clash API outages,
      - Stripe webhooks,
      - Supabase/storage.

---

## 3. Output format

Please structure your answer clearly, in this format:

1. **Summary**
   - 3‚Äì5 bullet points summarising the current state.

2. **Features by bucket**
   - ‚úÖ Fully implemented & production-ready  
     - Item ‚Üí short description + key files.
   - üü° Implemented but incomplete / fragile  
     - Item ‚Üí what works, what‚Äôs missing, main risks.
   - üß© Mocked / placeholder / skeleton only  
     - Item ‚Üí what is mock and what is needed to make it real.
   - üî¥ Planned but NOT implemented  
     - Item ‚Üí reference to previous plans (e.g. multi-currency, extra notifications, etc.).

3. **Top 5 risks before a public launch**
   - Short, concrete explanation of what could break or confuse a real user.

Be as **concrete and specific** as possible: mention file names, routes, and props/state when relevant.  
Do not sugar-coat: if something is half broken or only ‚Äúdemo-ready‚Äù, say it clearly.

Again: **do not change any code** in this run ‚Äì this is a pure analysis/audit step.
